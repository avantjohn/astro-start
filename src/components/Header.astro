---
import Logo from '../components/Logo.astro';
import HeaderLink from './HeaderLink.astro';
---

<header>
	<nav>
		<div class="nav-brand">
			<div class="menu-icon" id="menuIcon">
				<div class="bar1"></div>
				<div class="bar2"></div>
				<div class="bar3"></div>
			</div>
			<a href="/"><div class="logo"><Logo /></div></a>
		</div>
		<div class="fullscreen-nav" id="fullscreenNav">
			<div class="nav-links">
				<HeaderLink href="/">Home</HeaderLink>
				<HeaderLink href="/blog">Blog</HeaderLink>
				<HeaderLink href="/about">About</HeaderLink>
			</div>
		</div>
	</nav>
</header>

<style>
	/* Basic layout styles */
	header {
		padding: 1rem 2rem;
		background: white;
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.02);
	}

	nav {
		display: flex;
		align-items: center;
		justify-content: space-between;
	}

	/* Navigation brand and menu icon styles */
	.nav-brand {
		display: flex;
		align-items: center;
		gap: 1.5rem;
		position: relative;
		z-index: 1000;
	}

	.logo {
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.menu-icon {
		cursor: pointer;
		z-index: 1000;
		position: relative;
	}

	/* Hamburger menu bars and animations */
	.bar1, .bar2, .bar3 {
		width: 25px;
		height: 2px;
		background-color: black;
		margin: 5px 0;
		transition: 0.4s;
	}

	.menu-open .bar1,
	.menu-open .bar2,
	.menu-open .bar3 {
		background-color: white;
	}

	.menu-open .bar1 {
		transform: rotate(-45deg) translate(-5px, 5px);
	}

	.menu-open .bar2 {
		opacity: 0;
	}

	.menu-open .bar3 {
		transform: rotate(45deg) translate(-5px, -5px);
	}

	/* Fullscreen navigation overlay */
	.fullscreen-nav {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100vh;
		height: 100dvh;
		background-color: black;
		display: none;
		justify-content: center;
		align-items: center;
		z-index: 999;
		overflow: hidden;
	}

	/* Navigation links styling */
	.nav-links {
		text-align: center;
	}

	.nav-links a {
		display: block;
		color: white;
		font-size: 2rem;
		margin: 20px;
		text-decoration: none;
		opacity: 0;
		transform: translateY(20px);
	}

	/* Body scroll lock when menu is open */
	:global(body.menu-open) {
		overflow: hidden;
		position: fixed;
		width: 100%;
		height: 100%;
	}
</style>

<script>
	import gsap from 'gsap';

	// DOM element selections
	const menuIcon = document.getElementById('menuIcon');
	const fullscreenNav = document.getElementById('fullscreenNav');
	const navLinks = document.querySelectorAll('.nav-links a');

	let isMenuOpen = false;

	// Event listener for menu toggle
	menuIcon?.addEventListener('click', toggleMenu);

	// Menu toggle function with GSAP animations
	function toggleMenu() {
		isMenuOpen = !isMenuOpen;
		menuIcon?.classList.toggle('menu-open');
		document.body.classList.toggle('menu-open');

		if (isMenuOpen) {
			// Opening animations
			if (fullscreenNav) {
				fullscreenNav.style.display = 'flex';
				
				// Fade in overlay
				gsap.to(fullscreenNav, {
					opacity: 1,
					duration: 0.5,
					ease: 'power2.inOut'
				});

				// Stagger animate links
				gsap.to(navLinks, {
					opacity: 1,
					y: 0,
					duration: 0.5,
					stagger: 0.1,
					ease: 'power2.out',
					delay: 0.2
				});
			}
		} else {
			// Closing animations
			gsap.to(navLinks, {
				opacity: 0,
				y: 20,
				duration: 0.3,
				stagger: 0.05,
				ease: 'power2.in'
			});

			if (fullscreenNav) {
				gsap.to(fullscreenNav, {
					opacity: 0,
					duration: 0.5,
					ease: 'power2.inOut',
					onComplete: () => {
						fullscreenNav.style.display = 'none';
					}
				});
			}
		}
	}
</script>
